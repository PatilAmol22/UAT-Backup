<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <apiVersion>49.0</apiVersion>
    <dynamicChoiceSets>
        <name>Crop</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Crop_Master__c</picklistField>
        <picklistObject>Axedasurvey__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>Crop_Pronutiva</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Crop_Pronutiva__c</picklistField>
        <picklistObject>Axedasurvey__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>Crop_Record_choice</name>
        <dataType>String</dataType>
        <displayField>Dependent_field_value__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Controlling_field_API_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Season__c</stringValue>
            </value>
        </filters>
        <filters>
            <field>Controlling_field_Value__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Season</elementReference>
            </value>
        </filters>
        <filters>
            <field>Dependent_field_API_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Crop_Pronutiva__c</stringValue>
            </value>
        </filters>
        <filters>
            <field>Object_Name_for_Dependent_Picklist__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Axedasurvey__c</stringValue>
            </value>
        </filters>
        <object>Dependent_Picklist_Pronutiva__mdt</object>
        <outputAssignments>
            <assignToReference>CropVar</assignToReference>
            <field>Dependent_field_value__c</field>
        </outputAssignments>
        <sortField>Dependent_field_value__c</sortField>
        <sortOrder>Asc</sortOrder>
        <valueField>Dependent_field_value__c</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>FinancialYear</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Financial_Year__c</picklistField>
        <picklistObject>Axedasurvey__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>Season_Pronutiva</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Season__c</picklistField>
        <picklistObject>Axedasurvey__c</picklistObject>
    </dynamicChoiceSets>
    <interviewLabel>New Pronutiva Kits Survey {!$Flow.CurrentDateTime}</interviewLabel>
    <label>New Pronutiva Kits Survey</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Survey</name>
        <label>Create Survey</label>
        <locationX>565</locationX>
        <locationY>188</locationY>
        <assignRecordIdToReference>NewAbsenceId</assignRecordIdToReference>
        <connector>
            <targetReference>Thank_You</targetReference>
        </connector>
        <inputAssignments>
            <field>Crop_Pronutiva__c</field>
            <value>
                <elementReference>Crop1_0</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Date__c</field>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Distributor_Mobile_Number__c</field>
            <value>
                <elementReference>Distributor_Mobile_No</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Distributor_Name__c</field>
            <value>
                <elementReference>Distributor_Name_0</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Distributor_SAP_Code__c</field>
            <value>
                <elementReference>Distributor_SAP_Code_0</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Financial_Year__c</field>
            <value>
                <elementReference>Financial_Year</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobileNo__c</field>
            <value>
                <elementReference>Retailer_Mob_no_0</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>No_of_kits_booked__c</field>
            <value>
                <elementReference>No_of_Kits_Booked_0</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>RecordId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Retailer_Name__c</field>
            <value>
                <elementReference>Retailer_Name</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Retailer_location_town_name__c</field>
            <value>
                <elementReference>Retailer_location_town_name</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBU_Code__c</field>
            <value>
                <elementReference>SBUCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBU_Name__c</field>
            <value>
                <elementReference>SBUName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Season__c</field>
            <value>
                <elementReference>Season</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Territory_Code__c</field>
            <value>
                <elementReference>territoryCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Territory_Name__c</field>
            <value>
                <elementReference>territoryName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Total_acreages_booked__c</field>
            <value>
                <elementReference>Total_acreages_booked_0</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Value_of_Pronutiva_Kit_booked__c</field>
            <value>
                <elementReference>Value_of_Pronutiva_Kit_booked</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Zone_Code__c</field>
            <value>
                <elementReference>zoneCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Zone_Name__c</field>
            <value>
                <elementReference>zoneName</elementReference>
            </value>
        </inputAssignments>
        <object>Axedasurvey__c</object>
    </recordCreates>
    <recordLookups>
        <name>Get_Record_Type</name>
        <label>Get Record Type</label>
        <locationX>383</locationX>
        <locationY>154</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_Survey</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Pronutiva_Booking_Survey</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputAssignments>
            <assignToReference>RecordId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <screens>
        <name>Pronutiva_Kits_Survey</name>
        <label>Pronutiva Kits Survey</label>
        <locationX>519</locationX>
        <locationY>61</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Pronutiva_Kits_Survey_0</targetReference>
        </connector>
        <fields>
            <name>Retailer_Name</name>
            <dataType>String</dataType>
            <fieldText>Retailer Name</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Season</name>
            <choiceReferences>Season_Pronutiva</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <stringValue>Rabi</stringValue>
            </defaultValue>
            <fieldText>Season</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Financial_Year</name>
            <choiceReferences>FinancialYear</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Financial Year</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Pronutiva_Kits_Survey_0</name>
        <label>Pronutiva Kits Survey</label>
        <locationX>787</locationX>
        <locationY>69</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_Record_Type</targetReference>
        </connector>
        <fields>
            <name>Crop1_0</name>
            <choiceReferences>Crop_Pronutiva</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Crop</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>No_of_Kits_Booked_0</name>
            <dataType>Number</dataType>
            <fieldText>No of Kits Booked</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>0</scale>
            <validationRule>
                <errorMessage>&lt;p&gt;Invalid quantity&lt;/p&gt;</errorMessage>
                <formulaExpression>{!No_of_Kits_Booked_0} &gt; 0</formulaExpression>
            </validationRule>
        </fields>
        <fields>
            <name>Total_acreages_booked_0</name>
            <dataType>Number</dataType>
            <fieldText>Pronutiva acreages booked</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>2</scale>
            <validationRule>
                <errorMessage>&lt;p&gt;&lt;span style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255);&quot;&gt;Invalid acreage value. It will only accept values with 6 digits before decimal and 2 digits after decimal.&lt;/span&gt;&lt;/p&gt;</errorMessage>
                <formulaExpression>{!Total_acreages_booked_0} &gt; 0 &amp;&amp; {!Total_acreages_booked_0} &lt; 1000000</formulaExpression>
            </validationRule>
        </fields>
        <fields>
            <name>Value_of_Pronutiva_Kit_booked</name>
            <dataType>Number</dataType>
            <fieldText>Value of Pronutiva kits booked (in INR)</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>2</scale>
        </fields>
        <fields>
            <name>Distributor_SAP_Code_0</name>
            <dataType>String</dataType>
            <fieldText>Distributor SAP Code</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;Invalid Distributor Code&lt;/p&gt;</errorMessage>
                <formulaExpression>ISNUMBER ({!Distributor_SAP_Code_0})</formulaExpression>
            </validationRule>
        </fields>
        <fields>
            <name>Distributor_Name_0</name>
            <dataType>String</dataType>
            <fieldText>Distributor Name</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Distributor_Mobile_No</name>
            <dataType>String</dataType>
            <fieldText>Distributor Mobile No</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;Mobile number not allowed&lt;/p&gt;</errorMessage>
                <formulaExpression>ISNUMBER ({!Distributor_Mobile_No}) &amp;&amp; LEN ({!Distributor_Mobile_No}) &lt; 11 &amp;&amp; LEN ({!Distributor_Mobile_No}) &gt; 9</formulaExpression>
            </validationRule>
        </fields>
        <fields>
            <name>Retailer_Mob_no_0</name>
            <dataType>String</dataType>
            <fieldText>Retailer Mob no</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;Mobile number not allowed&lt;/p&gt;</errorMessage>
                <formulaExpression>ISNUMBER ({!Retailer_Mob_no_0}) &amp;&amp; LEN ({!Retailer_Mob_no_0}) &lt; 11 &amp;&amp; LEN ({!Retailer_Mob_no_0}) &gt; 9</formulaExpression>
            </validationRule>
        </fields>
        <fields>
            <name>Retailer_location_town_name</name>
            <dataType>String</dataType>
            <fieldText>Retailer location / town name</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Thank_You</name>
        <label>Thank You</label>
        <locationX>696</locationX>
        <locationY>187</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>Thanks</name>
            <fieldText>&lt;p&gt;Thank you for taking the survey!!&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Pronutiva_Kits_Survey</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>CropVar</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NewAbsenceId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>RecordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SBUCode</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>SBUName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>territoryCode</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>territoryName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>zoneCode</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>zoneName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
